<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Advanced OSINT Agent</title>
    <link rel="stylesheet" href="/static/style.css">
</head>
<body>
    <div class="container">
        <header>
            <h1>🛡️ Advanced OSINT Agent</h1>
            <p>An intelligent research agent with advanced verification capabilities and comprehensive intelligence reporting.</p>
        </header>

        <main>
            <div id="input-section">
                <h2>1. Start a New Research Case</h2>
                <div class="config-grid">
                    <div class="config-item">
                        <label for="llm-model-select">AI Model</label>
                        <select id="llm-model-select" title="Select the AI model for research"></select>
                    </div>
                    <div class="config-item">
                        <label for="temperature-slider">Creativity (Temperature)</label>
                        <div class="slider-container">
                            <input type="range" id="temperature-slider" min="0" max="1" step="0.1" value="0.7" title="Adjust model creativity">
                            <span id="temperature-value">0.7</span>
                        </div>
                    </div>
                </div>
                <textarea id="research-topic" placeholder="Enter your OSINT investigation target (e.g., 'Cybersecurity assessment of example.com', 'Social media profile analysis for @username', 'Domain reputation check for suspicious-site.com')" title="Describe what you want to investigate"></textarea>
                <button id="start-research-btn">🚀 Start OSINT Investigation</button>
                <p class="help-text">💡 <strong>Tip:</strong> Use Ctrl/Cmd + Enter to start, Ctrl/Cmd + S to export investigation log</p>
            </div>

            <div id="status-section" class="hidden">
                <h2>2. Investigation Progress</h2>
                <div id="live-log" class="log-box"></div>
            </div>

            <div id="review-section" class="hidden">
                <h2>3. Intelligence Assessment Review</h2>
                <div id="findings-display" class="findings-box"></div>
                <div class="review-actions">
                    <button id="approve-btn">✅ Approve & Store in Memory</button>
                    <button id="reject-btn">❌ Reject Assessment</button>
                </div>
            </div>
            
            <div id="completion-section" class="hidden">
                 <h2>4. Investigation Complete</h2>
                 <div id="completion-message"></div>
                 <a id="download-link" class="hidden" href="#" target="_blank" download>📥 Download Report</a>
            </div>

            <!-- Enhanced agent with conversation memory -->
            <div id="enhanced-agent-section">
                <h2>🧠 Enhanced Agent with Memory</h2>
                <div class="enhanced-controls">
                    <div class="conversation-controls">
                        <button id="start-new-conversation-btn">🆕 Start New Conversation</button>
                        <button id="load-conversation-btn">📁 Load Conversation</button>
                        <input type="text" id="conversation-id-input" placeholder="Enter conversation ID..." class="hidden">
                        <button id="load-conversation-confirm-btn" class="hidden">Load</button>
                    </div>
                    
                    <div id="current-conversation-info" class="hidden">
                        <div class="conversation-meta">
                            <span id="conversation-id-display"></span>
                            <span id="conversation-stats"></span>
                        </div>
                    </div>
                </div>

                <div id="conversation-history" class="conversation-container hidden">
                    <h3>💬 Conversation History</h3>
                    <div id="chat-messages" class="chat-messages"></div>
                </div>

                <div id="enhanced-input-section" class="hidden">
                    <textarea id="enhanced-research-topic" placeholder="Ask a question or start an investigation..." title="Enter your query for the enhanced agent"></textarea>
                    <div class="enhanced-controls-row">
                        <button id="send-enhanced-query-btn">🚀 Send Query</button>
                        <button id="continue-conversation-btn" class="hidden">↗️ Continue Investigation</button>
                        <span id="context-indicator" class="context-indicator hidden">🧠 Using conversation context</span>
                    </div>
                </div>

                <div id="enhanced-status-section" class="hidden">
                    <h3>Investigation Status</h3>
                    <div id="enhanced-live-log" class="log-box"></div>
                </div>

                <div id="enhanced-results-section" class="hidden">
                    <h3>Enhanced Investigation Results</h3>
                    <div id="enhanced-findings-display" class="findings-box"></div>
                    <div class="memory-info">
                        <div id="memory-stats" class="memory-stats"></div>
                        <div id="cached-findings" class="cached-findings hidden">
                            <h4>📚 Cached Findings</h4>
                            <div id="cached-findings-list"></div>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>
    <script src="/static/script.js"></script>
</body>
</html>
